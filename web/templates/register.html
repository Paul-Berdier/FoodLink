<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodLink - Inscription</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='register.css') }}">
</head>
<body>
    <!-- Conteneur d'inscription -->
    <div class="signup-container">
        <h2>Inscription</h2>
        <form method="POST" action="{{ url_for('register') }}">
    <div>
        <label for="email">Adresse Email</label>
        <input type="email" name="email" id="email" required>
    </div>
    <div>
        <label for="password">Mot de passe</label>
        <input type="password" name="password" id="password" required>
    </div>
    <div>
        <label for="role">Rôle</label>
        <select name="role" id="role" onchange="toggleRoleFields()" required>
            <option value="">Choisissez un rôle</option>
            <option value="commerce">Commerce</option>
            <option value="association">Association</option>
        </select>
    </div>
    <div id="commerce-fields" style="display: none;">
        <label for="nom_commerce">Nom du Commerce</label>
        <input type="text" name="nom_commerce" id="nom_commerce">
        <label for="siret_commerce">SIRET du Commerce</label>
        <input type="text" name="siret_commerce" id="siret_commerce">
    </div>
    <div id="association-fields" style="display: none;">
        <label for="nom_association">Nom de l'Association</label>
        <input type="text" name="nom_association" id="nom_association">
        <label for="siret_association">SIRET de l'Association</label>
        <input type="text" name="siret_association" id="siret_association">
    </div>

    <button type="submit" class="signup-btn">S'inscrire</button>
</form>

<script>
    function toggleRoleFields() {
        const role = document.getElementById('role').value;
        document.getElementById('commerce-fields').style.display = role === 'commerce' ? 'block' : 'none';
        document.getElementById('association-fields').style.display = role === 'association' ? 'block' : 'none';
    }
</script>


        <!-- Redirection vers la page de connexion -->
        <div class="options">
            <a href="{{ url_for('login') }}">Vous avez déjà un compte ? Connectez-vous</a>
        </div>
    </div>
    <div>
    <!-- Affichage des messages flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul class="flash-messages">
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
        </div>
</body>
</html>
